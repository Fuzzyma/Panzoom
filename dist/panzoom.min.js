function PanZoom(t,e=.1,n=5,i=.1){document.querySelectorAll(t).forEach(function(t){new AttachPanZoom(t,e,n,i)})}function AttachPanZoom(t,e,n,i){this.increment=i,this.minScale=e,this.maxScale=e,this.panning=!1,this.oldX=this.oldY=0;let s=this;t.style.transform="matrix(1, 0, 0, 1, 0, 0)",this.getTransformMatrix=function(){trans=t.style.transform;let e=trans.indexOf("(")+1,n=trans.indexOf(")");return matrix=trans.slice(e,n).split(","),{scale:+matrix[0],transX:+matrix[4],transY:+matrix[5]}},this.setTransformMatrix=function(e){t.style.transform="matrix("+e.scale+", 0, 0, "+e.scale+", "+e.transX+", "+e.transY+")"},this.applyTranslate=function(t,e){let n=this.getTransformMatrix();n.transX+=t,n.transY+=e,this.setTransformMatrix(n)},this.applyScale=function(e,n,i){let s=this.getTransformMatrix(),a=n-t.width/2,l=i-t.height/2;s.scale+=e,s.scale<this.minScale&&(s.scale=this.minScale),this.applyTranslate(a,l),this.setTransformMatrix(s),this.applyTranslate(-a*e,-l*e)},t.addEventListener("mousedown",function(t){t.preventDefault(),this.panning=!0,this.oldX=t.clientX,this.oldY=t.clientY}),t.addEventListener("mouseup",function(t){this.panning=!1}),t.addEventListener("mouseleave",function(t){this.panning=!1}),t.addEventListener("mousemove",function(t){if(this.panning){let e=t.clientX-this.oldX,n=t.clientY-this.oldY;s.applyTranslate(e,n),this.oldX=t.clientX,this.oldY=t.clientY}}),this.getScrollDirection=function(t){(event.wheelDelta?event.wheelDelta:-1*event.deltaY)<0?s.applyScale(-s.increment,t.offsetX,t.offsetY):s.applyScale(s.increment,t.offsetX,t.offsetY)},t.addEventListener("DOMMouseScroll",this.getScrollDirection,!1),t.addEventListener("mousewheel",this.getScrollDirection,!1)}